<!DOCTYPE html>
<html lang="si">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK" crossorigin="anonymous"></script>

	<style>
		.username {
			max-width: 50vw;
			font-weight: 600;
			text-align: center;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			display: inline-block;
			font-size: clamp(0.8rem, 5vw - 0.5rem, 1.4rem); /* Адаптив */
		}

		body {
			padding-top: 56px; /* высота navbar */
		  }
	</style>

	{% block head %}{% endblock head %}
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

</head>
<body data-bs-theme="dark">
	<nav class="navbar bg-dark fixed-top px-2">
		<!-- Левая кнопка меню -->
		<button class="btn btn-dark" type="button" data-bs-toggle="offcanvas" data-bs-target="#menuOffcanvas">
		  <i class="bi bi-list fs-3"></i>
		</button>
	  
		<!-- Имя пользователя -->
		<div class="mx-auto username">
			<span class="username">
				<span id="user_firstname"></span>
				<span id="user_lastname"></span>
			</span>
		</div>
	  
		<!-- Правая иконка уведомлений -->
		<button class="btn btn-dark" 
				id="notif-icon" 
				type="button" 
				data-bs-toggle="offcanvas" 
				data-bs-target="#notificationsOffcanvas"
				style="position: relative;">
			<i class="bi bi-bell fs-4"></i>
			<span id="notif-badge" 
			style="
				position: absolute;
				top: 2px;
				right: 2px;
				background-color: red;
				width: 10px;
				height: 10px;
				border-radius: 50%;
				display: none;
			">
			</span>
		</button>
	</nav>
	  
	  <!-- Шторка: Меню -->
	<div class="offcanvas offcanvas-start text-bg-dark" tabindex="-1" id="menuOffcanvas">
		<div class="offcanvas-header d-flex justify-content-between align-items-center">
			<div class="d-flex align-items-center gap-3">
				<button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
				<div class="username" style="max-width: 200px; font-size: clamp(0.8rem, 3vw, 1.2rem); font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
					<span id="username"></span>
				</div>
			</div>
			<h5 class="offcanvas-title mb-0">Meni</h5>
		</div>
		    
		<div class="offcanvas-body d-flex flex-column justify-content-between p-0">
			<div class="list-group list-group-flush">
				<button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3" onclick="window.location.href='{% url 'my_account' %}'">
					<i class="bi bi-person-circle me-3"></i>
					<span class="flex-grow-1">Moj račun</span>
				</button>
				<button class="list-group-item list-group-item-action d-flex align-items-center text-warning px-4 py-4" id="user_money_btn" onclick="window.location.href=''">
					<i class="bi bi-coin me-3"></i>
					<span class="flex-grow-1" id="user_money">
						
					</span>
				</button>
				<button class="list-group-item list-group-item-action d-flex align-items-center text-warning px-4 py-4" id="user_jc_btn" onclick="window.location.href=''">
					<i class="bi bi-braces-asterisk me-3"></i>
					<span class="flex-grow-1" id="user_jc">
						
					</span>
				</button>
				<button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3" onclick="window.location.href='{% url 'my_calendar' %}'">
					<i class="bi bi-calendar-event me-3"></i>
					<span class="flex-grow-1">Moj koledar</span>
				</button>
				<button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3" onclick="window.location.href='{% url "assessments" %}'">
					<i class="bi bi-clipboard-check me-3"></i>
					<span class="flex-grow-1">Ocenjevanja</span>
					{% comment %} <span class="badge bg-danger rounded-pill">1</span> {% endcomment %}
				</button>
				<button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3" onclick="window.location.href='{% url 'my_class' %}'">
					<i class="bi bi-people me-3"></i>
					<span class="flex-grow-1">Moj razred</span>
				</button>
			</div>
		  
			<div class="list-group list-group-flush mt-3">
				<button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3" onclick="window.location.href=''">
					<i class="bi bi-bug me-3"></i>
					<span class="flex-grow-1">Prijava tehničnih napak</span>
				</button>
				<button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3" onclick="window.location.href=''">
					<i class="bi bi-code-slash me-3"></i>
					<span class="flex-grow-1">Razvijalci</span>
				</button>
				<button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3 text-danger" onclick="window.location.href=''">
					<i class="bi bi-box-arrow-right me-3"></i>
					<span class="flex-grow-1">Odjava</span>
				</button>
			</div>
		</div>	  
	</div>
	
	<!-- Шторка: Уведомления -->
	<div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="notificationsOffcanvas">
		<div class="offcanvas-header">
		<h5 class="offcanvas-title">Obvestila</h5>
			<button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
		</div>
		<div class="offcanvas-body p-0">
			<div class="list-group list-group-flush" id="notifications"> 

			
			</div>
		</div>
	</div>
	
	<!-- СЮДА ВСЕ МЯСО -->

	{% block content %}{% endblock content %}

	<script type='module' src="/static/js/core/main_template/renderMenu.js"></script>

	<!-- JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Bootstrap Icons -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</body>
</html>