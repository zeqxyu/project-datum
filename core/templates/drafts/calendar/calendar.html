<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moj koledar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK" crossorigin="anonymous"></script>

	<style>
        .username {
            max-width: 50vw;
            font-weight: 600;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
            font-size: clamp(0.8rem, 5vw - 0.5rem, 1.4rem); /* Адаптив */
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body data-bs-theme="dark">
    <!-- ПО СУТИ ТУТ БАЗА ВСЕХ СТРАНИЦ В НАВЕ И ШТОРКАХ -->
    <nav class="navbar bg-dark px-2">
		<!-- Левая кнопка меню -->
		<button class="btn btn-dark" type="button" data-bs-toggle="offcanvas" data-bs-target="#menuOffcanvas">
		    <i class="bi bi-list fs-3"></i>
		</button>
	  
		<!-- Имя пользователя -->
		<div class="mx-auto username">
			<span class="username" id="username">Anton Božič-Matvijenko</span>
		</div>
	  
		<!-- Правая иконка уведомлений -->
		<button class="btn btn-dark" type="button" data-bs-toggle="offcanvas" data-bs-target="#notificationsOffcanvas">
		    <i class="bi bi-bell fs-4"></i>
		</button>
	</nav>
	  
	<!-- Шторка: Меню -->
	<div class="offcanvas offcanvas-start text-bg-dark" tabindex="-1" id="menuOffcanvas">
		<div class="offcanvas-header d-flex justify-content-between align-items-center">
			<div class="d-flex align-items-center gap-3">
			    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
			    <div class="username" style="max-width: 200px; font-size: clamp(0.8rem, 3vw, 1.2rem); font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
				    Anton Božič-Matvijenko
			    </div>
			</div>
			<h5 class="offcanvas-title mb-0">Meni</h5>
		</div>
		    
		<div class="offcanvas-body d-flex flex-column justify-content-between p-0">
			<div class="list-group list-group-flush">
			    <button class="list-group-item list-group-item-action d-flex align-items-center text-warning px-4 py-4">
				    <i class="bi bi-coin me-3"></i>
				    <span class="flex-grow-1">1675</span>
			    </button>
			    <button class="list-group-item list-group-item-action d-flex align-items-center text-warning px-4 py-4">
				    <i class="bi bi-braces-asterisk me-3"></i>
				    <span class="flex-grow-1">1.37</span>
			    </button>
			    <button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3">
				    <i class="bi bi-calendar-event me-3"></i>
				    <span class="flex-grow-1">Moj koledar</span>
			    </button>
			    <button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3">
				    <i class="bi bi-clipboard-check me-3"></i>
				    <span class="flex-grow-1">Ocenjevanja</span>
				    <span class="badge bg-danger rounded-pill">1</span>
			    </button>
                <button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3">
                    <i class="bi bi-people me-3"></i>
                    <span class="flex-grow-1">Moj razred</span>
                </button>
			</div>
		  
			<div class="list-group list-group-flush mt-3">
                <button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3">
                    <i class="bi bi-code-slash me-3"></i>
                    <span class="flex-grow-1">Razvijalci</span>
                </button>
                <button class="list-group-item list-group-item-action d-flex align-items-center px-4 py-3 text-danger">
                    <i class="bi bi-box-arrow-right me-3"></i>
                    <span class="flex-grow-1">Odjava</span>
                </button>
			</div>
		</div>	  
    </div>

    <!-- Шторка: Уведомления -->
	<div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="notificationsOffcanvas">
		<div class="offcanvas-header">
            <h5 class="offcanvas-title">Obvestila</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
		</div>
		<div class="offcanvas-body p-0">
			<div class="list-group list-group-flush">
			    <!-- ВАЖНОЕ + переход -->
			    <button class="list-group-item list-group-item-action bg-warning text-dark px-4 py-3 border-0" onclick="window.location.href='/ocene'">
                    <div class="small text-secondary mb-1">25. 7. 2025, 17:00</div>
                        <div class="d-flex align-items-center">
                            <i class="bi bi-shuffle me-3 fs-5"></i>
                        <div class="flex-grow-1">Aleks želi zamenjati z vami datum</div>
                    </div>
			    </button>
		  
                <!-- НЕВАЖНОЕ (просто панель) -->
                <button class="list-group-item list-group-item-action bg-dark text-light px-4 py-3 border-0" onclick="">
                    <div class="small text-secondary mb-1">
                        25. 7. 2025, 14:23
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="bi bi-info-circle me-3 fs-5"></i>
                        <div class="flex-grow-1">
                            Vaš pravičnostni koeficient: 1.04 -> 1.37
                        </div>
                    </div>
                </button>
		  
			  <!-- ВАЖНОЕ + переход -->
                <button class="list-group-item list-group-item-action bg-primary text-light px-4 py-3 border-0" onclick="window.location.href='/razpored'">
                    <div class="small text-secondary-emphasis mb-1">
                        25. 7. 2025, 11:42
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="bi bi-calendar-week me-3 fs-5"></i>
                        <div class="flex-grow-1">
                            Novo ustno ocenjevanje iz MAT! Izberite datum!
                        </div>
                    </div>
                </button>

                <button class="list-group-item list-group-item-action bg-primary text-light px-4 py-3 border-0" onclick="window.location.href='/razpored'">
                    <div class="small text-secondary-emphasis mb-1">
                        25. 7. 2025, 9:31
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="bi bi-calendar-week me-3 fs-5"></i>
                        <div class="flex-grow-1">
                            Datumi za ANG so ovrednoteni! Kupite zdaj!
                        </div>
                    </div>
                </button>
			</div>
		</div>  
	</div>

	<!-- ТУТ УЖЕ ТЕЛО САЙТА -->


    <div class="container mt-4">
        <!-- Шапка с месяцем -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <button class="btn btn-outline-light" onclick="prevMonth()">
                <i class="bi bi-chevron-left"></i>
            </button>
            <h4 id="calendar-month" class="mb-0">Februar 2025</h4>
            <button class="btn btn-outline-light" onclick="nextMonth()">
                <i class="bi bi-chevron-right"></i>
            </button>
        </div>
      
        <!-- Календарная сетка -->
        <div class="row row-cols-5 g-2" id="calendarGrid">
          <!-- Ячейки генерируются скриптом ниже -->
        </div>
    </div>

    <hr class="text-secondary mt-4">

    <h5 class="text-center text-light mb-3">Seznam datumov</h5>
    <div class="table-responsive">
        <table class="table table-dark table-hover table-borderless text-center align-middle">
            <tbody>
                <tr data-bs-toggle="offcanvas" data-bs-target="#dayOffcanvas" onclick="prepareDay(2)" style="cursor: pointer;">
                    <td class="py-2">02. 02.</td>
                    <td class="py-2">MAT</td>
                </tr>
                <tr data-bs-toggle="offcanvas" data-bs-target="#dayOffcanvas" onclick="prepareDay(2)" style="cursor: pointer;">
                    <td class="py-2">02. 02.</td>
                    <td class="py-2">ŠPO</td>
                </tr>
                <tr data-bs-toggle="offcanvas" data-bs-target="#dayOffcanvas" onclick="prepareDay(7)" style="cursor: pointer;">
                    <td class="py-2">07. 02.</td>
                    <td class="py-2">ANG</td>
                </tr>
                <tr data-bs-toggle="offcanvas" data-bs-target="#dayOffcanvas" onclick="prepareDay(15)" style="cursor: pointer;">
                    <td class="py-2">15. 02.</td>
                    <td class="py-2">MAT</td>
                </tr>
                <tr data-bs-toggle="offcanvas" data-bs-target="#dayOffcanvas" onclick="prepareDay(15)" style="cursor: pointer;">
                    <td class="py-2">15. 02.</td>
                    <td class="py-2">ŠPO</td>
                </tr>
                <tr data-bs-toggle="offcanvas" data-bs-target="#dayOffcanvas" onclick="prepareDay(23)" style="cursor: pointer;">
                    <td class="py-2">23. 02.</td>
                    <td class="py-2">ANG</td>
                </tr>
            </tbody>
        </table>
    </div>

      
    <!-- Шторка дня -->
    <div class="offcanvas offcanvas-bottom text-bg-dark" tabindex="-1" id="dayOffcanvas" style="height: 60vh;">
        <div class="offcanvas-header border-bottom">
            <h5 class="offcanvas-title" id="dayTitle">03. 02. 2025 (PO)</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <div id="lessonList" class="d-flex flex-column gap-2">
                <!-- сюда вставим пары -->
            </div>
        </div>
    </div>


    <script>
        const weekdays = ['PO', 'TO', 'SR', 'ČE', 'PE'];
    
        const lessonData = {
        3: ['MAT', '', '', '', '', '', '', '', '', ''],
        7: ['', '', '', '', 'ANG', '', '', '', '', ''],
        15: ['ŠPO', '', 'MAT', '', '', '', '', '', '', ''],
        23: ['', '', '', 'ANG', '', '', '', '', '', '']
        };
    
        const grid = document.getElementById('calendarGrid');
        for (let i = 1; i <= 30; i++) {
        const cell = document.createElement('div');
        cell.className = 'col';
        cell.innerHTML = `
            <div class="border rounded position-relative calendar-cell p-2 bg-dark text-white"
                style="min-height: 100px; cursor: pointer;"
                data-bs-toggle="offcanvas" data-bs-target="#dayOffcanvas"
                onclick="prepareDay(${i})">
            <small class="position-absolute top-0 start-0 m-1 text-muted">${i}</small>
            <div class="d-flex flex-wrap gap-1 mt-4">
                ${
                lessonData[i]
                    ? lessonData[i].filter(Boolean).map(sub =>
                        `<span class="badge ${getColor(sub)}">${sub}</span>`).join('')
                    : ''
                }
            </div>
            </div>
        `;
        grid.appendChild(cell);
        }
    
        function getColor(sub) {
        if (sub === 'MAT') return 'bg-primary text-white';
        if (sub === 'ANG') return 'bg-danger text-white';
        if (sub === 'ŠPO') return 'bg-secondary text-white';
        return 'bg-light text-dark';
        }
    
        function prepareDay(day) {
        const date = (day < 10 ? '0' : '') + day + '. 02. 2025';
        const weekday = weekdays[(day - 1) % 5];
        document.getElementById('dayTitle').textContent = `${date} (${weekday})`;
    
        const lessons = lessonData[day] || Array(10).fill('');
        const list = document.getElementById('lessonList');
        list.innerHTML = '';
    
        lessons.forEach((subject, idx) => {
            const div = document.createElement('div');
            div.className = 'd-flex align-items-center';
    
            const number = `<div class="me-3 text-muted" style="width: 24px;">${idx}</div>`;
    
            let content;
            if (subject) {
            content = `<div class="badge ${getColor(subject)} px-3 py-2" role="button">${subject}</div>`;
            } else {
            content = `<div class="text-muted">—</div>`;
            }
    
            div.innerHTML = number + content;
            list.appendChild(div);
        });
        }

    
    </script>
  
    <!-- LIBS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Bootstrap Icons -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</body>
</html>